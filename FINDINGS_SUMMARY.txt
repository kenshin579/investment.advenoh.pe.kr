═══════════════════════════════════════════════════════════════════════════════
CODEBASE EXPLORATION FINDINGS: CATEGORY BUTTON POST COUNTS
═══════════════════════════════════════════════════════════════════════════════

PROJECT: investment.advenoh.pe.kr
OBJECTIVE: Add post counts to category filter buttons (e.g., "Stock (61)")

═══════════════════════════════════════════════════════════════════════════════
KEY FINDINGS
═══════════════════════════════════════════════════════════════════════════════

✓ POST COUNTS ARE ALREADY GENERATED
  Location: public/data/categories.json
  Format: [{ category: "Stock", count: 61 }, ...]
  Generated by: scripts/generateStaticData.ts
  
✓ DATA FLOWS CORRECTLY THROUGH SYSTEM
  Markdown → generateStaticData.ts → categories.json → getAllCategoriesServer() 
  → page.tsx (server) → HomePageClient → CategoryFilterClient
  
✓ HOMEPAGELCLIENT RECEIVES DATA WITH COUNTS
  Props: categories: Array<{ category: string; count: number }>
  Passes to: <CategoryFilterClient categories={categories} />
  
✗ CATEGORYFILTER COMPONENT DISCARDS COUNT DATA
  Issue: Only destructures category name: categories.map(({ category }) => ...)
  Result: Count field is thrown away
  
✗ UI DOES NOT DISPLAY COUNTS
  Shows only: "Stock", "Weekly", "ETF", "Etc"
  Should show: "Stock (61)", "Weekly (14)", "ETF (11)", "Etc (9)"

═══════════════════════════════════════════════════════════════════════════════
FILES INVOLVED
═══════════════════════════════════════════════════════════════════════════════

PRIMARY TARGETS (Needs Changes):
─────────────────────────────────────────────────────────────────────────────
1. /src/components/category-filter-client.tsx
   Lines 26-32: Data transformation (extract count here)
   Lines 56-68: Button rendering (display count here)

2. /src/components/category-filter.tsx (Optional - alt component)
   Lines 29-35: Data transformation
   Lines 41-52: Button rendering

REFERENCE FILES (No Changes Needed - Already Complete):
─────────────────────────────────────────────────────────────────────────────
✓ /scripts/generateStaticData.ts - Generates counts correctly
✓ /public/data/categories.json - Has counts in JSON
✓ /src/types/blog.ts - Category interface has count field
✓ /src/lib/blog-server.ts - Server function reads counts
✓ /src/lib/blog-client.ts - Client function fetches counts
✓ /src/app/page.tsx - Server component passes counts
✓ /src/components/home-page-client.tsx - Passes counts to filter

═══════════════════════════════════════════════════════════════════════════════
CURRENT DATA STRUCTURE IN categories.json
═══════════════════════════════════════════════════════════════════════════════

[
  {
    "category": "Stock",
    "count": 61
  },
  {
    "category": "Weekly",
    "count": 14
  },
  {
    "category": "ETF",
    "count": 11
  },
  {
    "category": "Etc",
    "count": 9
  }
]

═══════════════════════════════════════════════════════════════════════════════
CODE SECTIONS THAT NEED MODIFICATION
═══════════════════════════════════════════════════════════════════════════════

FILE: /src/components/category-filter-client.tsx

SECTION 1: Data Transformation (Lines 26-32)
──────────────────────────────────────────────
CURRENT:
  const allCategories = [
    { id: "all", label: "전체" },
    ...(Array.isArray(categories) ? categories.map(({ category }) => ({
      id: category,
      label: category
    })) : [])
  ]

CHANGE TO:
  const allCategories = [
    { id: "all", label: "전체", count: null },
    ...(Array.isArray(categories) ? categories.map(({ category, count }) => ({
      id: category,
      label: category,
      count: count
    })) : [])
  ]

SECTION 2: Button Rendering (Lines 56-68)
──────────────────────────────────────────
CURRENT:
  <Button>
    {category.label}
  </Button>

CHANGE TO (one of three options):

  OPTION A (Parentheses - Clean, Recommended):
    <Button>
      {category.label}
      {category.count && <span className="ml-1">({category.count})</span>}
    </Button>

  OPTION B (Dot Separator - Minimal):
    <Button>
      {category.label}
      {category.count && <span className="ml-1">· {category.count}</span>}
    </Button>

  OPTION C (Inline - Most Compact):
    <Button>
      {category.label} {category.count ? `(${category.count})` : ''}
    </Button>

═══════════════════════════════════════════════════════════════════════════════
DATA FLOW DIAGRAM
═══════════════════════════════════════════════════════════════════════════════

BUILD TIME:
  Markdown contents/ 
    ↓
  scripts/generateStaticData.ts 
    ├─ Scans all markdown files
    ├─ Counts posts per category
    ├─ Sorts by count descending
    ↓
  public/data/categories.json ✓ (HAS COUNTS)

RUNTIME (Server-Side Rendering):
  src/app/page.tsx (Server Component)
    ├─ getAllCategories() 
    ├─ Returns: [{ category: "Stock", count: 61 }, ...]
    ↓
  HomePageClient (Props: categories with counts ✓)
    ↓
  CategoryFilterClient (Receives: categories with counts ✓)
    ├─ Line 28: categories.map(({ category }) ← ✗ THROWS AWAY count
    ├─ Creates: [{ id: "Stock", label: "Stock" }] ← NO COUNT
    ↓
  Button Rendering
    ├─ Shows: "Stock" ← SHOULD SHOW "Stock (61)"
    ↓
  User sees: "Stock", "Weekly", "ETF", "Etc" (NO COUNTS)

══════��════════════════════════════════════════════════════════════════════════
IMPLEMENTATION EFFORT ESTIMATE
═══════════════════════════════════════════════════════════════════════════════

Tasks:
  1. Update CategoryFilterClient - Extract count field         15 min
  2. Update button rendering - Display counts                  15 min
  3. Test & verify counts display correctly                    10 min
  4. Optional: Update CategoryFilter component                 10 min
  5. Optional: Update footer categories display                10 min

Total: 30-45 minutes (without optional tasks)

Risk Level: LOW
  - Only modifying component display logic
  - No backend changes
  - No data structure changes
  - No API changes

═══════════════════════════════════════════════════════════════════════════════
TESTING AFTER IMPLEMENTATION
═══════════════════════════════════════════════════════════════════════════════

Manual Tests:
  ✓ All category buttons display correct counts
  ✓ "전체" (All) button appears without count
  ✓ Buttons responsive on mobile
  ✓ Dark mode styling intact
  ✓ Clicking filters still works

Automated Checks:
  npm run check    (TypeScript check)
  npm run lint     (ESLint check)

═══════════════════════════════════════════════════════════════════════════════
DOCUMENT REFERENCES CREATED
═══════════════════════════════════════════════════════════════════════════════

1. CODEBASE_EXPLORATION.md (Comprehensive analysis)
   - Complete file-by-file breakdown
   - Data generation flow
   - Type definitions
   - Component hierarchy

2. CATEGORY_BUTTON_COUNTS_ANALYSIS.md (Implementation guide)
   - Step-by-step changes
   - Code examples for each option
   - Styling considerations
   - Testing checklist
   - Performance notes

3. FINDINGS_SUMMARY.txt (This file - Quick reference)

═══════════════════════════════════════════════════════════════════════════════
ABSOLUTE FILE PATHS (FOR COPY-PASTE)
═══════════════════════════════════════════════════════════════════════════════

/Users/user/WebstormProjects/investment.advenoh.pe.kr/src/components/category-filter-client.tsx
/Users/user/WebstormProjects/investment.advenoh.pe.kr/src/components/category-filter.tsx
/Users/user/WebstormProjects/investment.advenoh.pe.kr/public/data/categories.json
/Users/user/WebstormProjects/investment.advenoh.pe.kr/src/app/page.tsx
/Users/user/WebstormProjects/investment.advenoh.pe.kr/CODEBASE_EXPLORATION.md
/Users/user/WebstormProjects/investment.advenoh.pe.kr/CATEGORY_BUTTON_COUNTS_ANALYSIS.md

═══════════════════════════════════════════════════════════════════════════════
CONCLUSION
═══════════════════════════════════════════════════════════════════════════════

The infrastructure to display post counts is ALREADY IN PLACE:
  ✓ Counts are generated during build
  ✓ Counts flow through all system layers
  ✓ HomePageClient receives counts
  ✓ CategoryFilterClient receives counts

The ONLY ISSUE is that CategoryFilterClient doesn't extract or display the count.

SOLUTION: Simple 2-step UI change
  1. Extract count field in data transformation (line 28)
  2. Display count in button label (line 67)

EFFORT: 30-45 minutes
RISK: LOW (UI-only change)
IMPACT: High (improves user experience)

═══════════════════════════════════════════════════════════════════════════════
