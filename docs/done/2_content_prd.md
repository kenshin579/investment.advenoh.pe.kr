# 콘텐츠 목차 스타일 통일 PRD

## 1. 개요

### 1.1 목적

`contents/**/index.md` 파일의 마크다운 목차(heading) 스타일을 일관된 규칙으로 통일한다.

### 1.2 배경

- 블로그 포스트 93개 파일의 heading 스타일이 일관되지 않음
- 의도한 스타일: `# 1.` → `## 1.1` → `### 1.1.1` 계층 구조
- 현재 대부분의 파일(88개)이 `## 1.` → `### 1.1` → `#### 1.1.1`로 한 단계 낮게 작성됨
- 일부 파일은 번호 없이 heading을 사용하거나 번호 체계가 혼재됨

---

## 2. 현재 상태 분석

### 2.1 heading 레벨 현황

| 패턴 | 파일 수 | 설명 |
|------|---------|------|
| `##`(H2)로 시작 | ~88개 | 현재 대다수 — H2가 최상위 |
| `#`(H1)로 시작 | ~5개 | 의도한 스타일에 가까움 |
| 번호 없는 heading | ~14개 | 섹션 번호 자체가 없음 |

### 2.2 번호 체계 현황

| 유형 | 예시 | 상태 |
|------|------|------|
| 정수 번호만 사용 | `## 1.`, `## 2.`, `## 3.` | 가장 많음 |
| 계층 번호 사용 | `### 2.1`, `### 2.2` | 일부 파일 |
| 번호 누락 | `## 추적오차` (상위는 번호 있고 해당 섹션만 누락) | 간헐적 |
| 번호 없음 | 모든 heading에 번호가 없음 | 일부 파일 |

### 2.3 카테고리별 특성

| 카테고리 | 특징 |
|----------|------|
| **etc/** | 가이드 스타일, 짧은 글, `## N.` 패턴 |
| **etf/** | H1 사용 파일이 일부 존재, `series` 활용 |
| **stock/** | 가장 정형화된 구조, `## 1. 개요` → `## N. 마무리` → `## N. 참고` |
| **weekly/** | 리포트 스타일, 테이블/이모지 중심, `## N.` 패턴 |

---

## 3. 의도한 목차 스타일 규칙

### 3.1 heading 레벨 규칙

frontmatter의 `title`이 페이지 제목 역할을 하므로, 본문 heading은 `#`(H1)부터 시작한다.

```markdown
# 1. 대제목
본문 텍스트...

## 1.1 중제목
본문 텍스트...

### 1.1.1 소제목
본문 텍스트...
```

### 3.2 heading 레벨 매핑 (변환 규칙)

| 현재 (AS-IS) | 변환 후 (TO-BE) |
|--------------|----------------|
| `##` (H2) — 최상위 | `#` (H1) |
| `###` (H3) — 2단계 | `##` (H2) |
| `####` (H4) — 3단계 | `###` (H3) |
| `#####` (H5) — 4단계 | `####` (H4) |

### 3.3 번호 체계 규칙

| heading 레벨 | 번호 형식 | 예시 |
|-------------|-----------|------|
| `#` (H1) | `N.` | `# 1. 개요`, `# 2. 본문` |
| `##` (H2) | `N.N` | `## 1.1 소제목`, `## 2.1 설명` |
| `###` (H3) | `N.N.N` | `### 1.1.1 세부항목` |

### 3.4 특수 섹션 규칙

마지막 섹션들은 고정 패턴을 따른다:

```markdown
# N. 마무리
(선택 — 있는 파일만 유지)

# N. 참고
- [참고 링크](URL)
```

---

## 4. 변환 대상 범위

### 4.1 대상 파일

- 경로: `contents/**/index.md`
- 총 파일 수: ~93개
- 변환 대상: frontmatter 아래의 heading(`#`, `##`, `###`, `####`, `#####`) 라인만 수정

### 4.2 변환 제외 대상

- frontmatter (`---` 사이 영역)
- 본문 텍스트, 이미지, 테이블, blockquote 등 heading이 아닌 콘텐츠
- 코드 블록 내부의 `#` 문자 (마크다운 heading이 아님)

### 4.3 카테고리별 변환

| 카테고리 | 파일 수 | 비고 |
|----------|---------|------|
| `etc/` | ~9개 | |
| `etf/` | ~11개 | 일부 이미 H1 사용 — 번호 체계만 정리 |
| `stock/` | ~58개 | 가장 많음 |
| `weekly/` | ~15개 | |

---

## 5. 변환 예시

### 5.1 일반적인 stock 카테고리 파일

**AS-IS:**

```markdown
## 1. 개요
본문...

## 2. `액면분할`(Stock Split) 이란?

### 2.1 `액면분할`
설명...

### 2.2 `액면분할`을 하는 이유
설명...

#### 2.2.1 소액 투자자 유치
설명...

## 3. 마무리
본문...

## 4. 참고
- 링크
```

**TO-BE:**

```markdown
# 1. 개요
본문...

# 2. `액면분할`(Stock Split) 이란?

## 2.1 `액면분할`
설명...

## 2.2 `액면분할`을 하는 이유
설명...

### 2.2.1 소액 투자자 유치
설명...

# 3. 마무리
본문...

# 4. 참고
- 링크
```

### 5.2 번호 없는 heading이 포함된 파일

**AS-IS:**

```markdown
## CMA란?
본문...

### CMA 계좌의 특징
설명...

## CMA 종류

### `RP`형 (환매조건부 채권)
설명...

### `MMF`형 (Money Market Fund)
설명...

## 마무리
본문...

## 참고
- 링크
```

**TO-BE:**

```markdown
# 1. CMA란?
본문...

## 1.1 CMA 계좌의 특징
설명...

# 2. CMA 종류

## 2.1 `RP`형 (환매조건부 채권)
설명...

## 2.2 `MMF`형 (Money Market Fund)
설명...

# 3. 마무리
본문...

# 4. 참고
- 링크
```

### 5.3 weekly 카테고리 파일

**AS-IS:**

```markdown
## 섹터별 수익률
설명...

## 1. 국내 ETF
테이블...

## 2. 미국 ETF
테이블...

## 3. 주요 지표

### 3.1 환율, 채권, VIX
설명...

## 4. 주요 트렌드 정리
설명...

## 5. 참고
- 링크
```

**TO-BE:**

```markdown
# 1. 섹터별 수익률
설명...

# 2. 국내 ETF
테이블...

# 3. 미국 ETF
테이블...

# 4. 주요 지표

## 4.1 환율, 채권, VIX
설명...

# 5. 주요 트렌드 정리
설명...

# 6. 참고
- 링크
```

---

## 6. 주의사항

### 6.1 렌더링 영향 확인

- heading 레벨 변경 후 블로그 렌더링에 영향이 없는지 확인 필요
- `src/components/markdown-renderer.tsx`에서 heading 스타일링이 레벨별로 적절히 적용되는지 확인
- TOC(목차) 자동 생성 기능이 있다면 heading 레벨 변경에 따른 동작 확인

### 6.2 코드 블록 내 `#` 보호

마크다운 코드 블록(`` ``` ``) 안에 있는 `#`은 heading이 아니므로 변환 대상에서 제외해야 한다.

### 6.3 인코딩 유지

- 파일 수정 후 UTF-8 인코딩이 유지되는지 확인
- `file -I path/to/file.md`로 검증

---

## 7. 검증 방법

### 7.1 자동 검증

- [ ] 모든 `contents/**/index.md` 파일의 첫 heading이 `#`(H1)인지 확인
- [ ] `##`(H2) 이하로 시작하는 파일이 없는지 확인
- [ ] heading 번호 체계가 `N.` → `N.N` → `N.N.N` 순서를 따르는지 확인
- [ ] 코드 블록 내부의 `#`은 변환되지 않았는지 확인

### 7.2 빌드 검증

- [ ] `npm run build` 정상 동작
- [ ] `npm run start`로 로컬 확인 — heading 렌더링 정상 여부

### 7.3 인코딩 검증

- [ ] 수정된 파일의 인코딩이 UTF-8 유지: `file -I contents/**/index.md`
